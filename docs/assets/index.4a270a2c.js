import{w as j,b as m,e as _e,z as he,q as Ee,o as x,h as $,j as v,F as z,l as F,B as D,C as ge,_ as ne,n as me,t as ye,d as Pe,f as Z,D as De,E as Ie,c as Q,G as Ne,m as ce,i as Re,H as je,I as Oe,k as Ve,s as ze,x as Fe}from"./index.c87670a7.js";const de=(e,{decimal:o=0}={})=>o>0?Number(e.toFixed(o)):Math.round(e),V=(e,{onmousedown:o,onmousemove:t,onmouseup:a}={})=>{let l=e.getBoundingClientRect();const n={x:0,y:0},s=u=>{let f=u.pageX-l.x,_=u.pageY-l.y;f<0&&(f=0),f>l.width&&(f=l.width),_<0&&(_=0),_>l.height&&(_=l.height),n.x=de(f/l.width,{decimal:2}),n.y=de(_/l.height,{decimal:2})},d=u=>{s(u),t&&t(n,u)},p=u=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",p),a&&a(n,u)},g=u=>{l=e.getBoundingClientRect(),s(u),document.addEventListener("mousemove",d),document.addEventListener("mouseup",p),o&&o(n,u)};return e.addEventListener("mousedown",g),{destroy(){e.removeEventListener("mousedown",g)}}},xe=(e,o,t)=>{let a=Math.round(e).toString(16),l=Math.round(o).toString(16),n=Math.round(t).toString(16);return a.length===1&&(a="0"+a),l.length===1&&(l="0"+l),n.length===1&&(n="0"+n),"#"+a+l+n},fe=(e,o,t,a=1)=>{const l=xe(e,o,t);let n=Math.round(a*255).toString(16);return n.length===1&&(n="0"+n),l+n},be=(e,o,t)=>{e/=255,o/=255,t/=255;const a=Math.min(e,o,t),l=Math.max(e,o,t),n=l-a;let s=0,d=0;const p=l;if(n===0)s=d=0;else{d=n/l;const g=((l-e)/6+n/2)/n,u=((l-o)/6+n/2)/n,f=((l-t)/6+n/2)/n;e===l?s=f-u:o===l?s=1/3+g-f:t===l&&(s=2/3+u-g),s<0?s+=1:s>1&&(s-=1)}return[s*360,d*100,p*100]},qe=(e,o,t,a=1)=>[...be(e,o,t),a];function We(e,o,t){e=e/360*6,o/=100,t/=100;const a=Math.floor(e),l=e-a,n=t*(1-o),s=t*(1-l*o),d=t*(1-(1-l)*o),p=a%6,g=[t,s,n,n,d,t][p],u=[d,t,t,s,n,n][p],f=[n,n,d,t,t,s][p];return[Math.round(g*255),Math.round(u*255),Math.round(f*255)]}const Ke=(e,o,t)=>{const[a,l,n]=We(e,o,t);return xe(a,l,n)},Ue=(e,o,t,a=1)=>`${Ke(e,o,t)}${a===0?"00":Math.round(a*255).toString(16)}`,ee=e=>{e=e.slice(0,7);let o=0,t=0,a=0;return e.length==4?(o=Number("0x"+e[1]+e[1]),t=Number("0x"+e[2]+e[2]),a=Number("0x"+e[3]+e[3])):e.length==7&&(o=Number("0x"+e[1]+e[2]),t=Number("0x"+e[3]+e[4]),a=Number("0x"+e[5]+e[6])),[o,t,a]},te=e=>{const o=ee(e),t=Number("0x"+e[7]+e[8]);return[...o,Number((t/255).toFixed(2))]},Xe=e=>{const[o,t,a,l]=te(e);return qe(o,t,a,l)},ve=e=>e.startsWith("#")?"\u7EAF\u8272":e.startsWith("linear-gradient")?"\u6E10\u53D8":"\u56FE\u6848",pe=(e,o)=>{const t=[];return o.forEach(a=>{t.push(`${a.color} ${a.offset*100}%`)}),`linear-gradient(${e}deg, ${t.join(",")})`};function Ye(e){const o=Je(e);document.body.appendChild(o),setTimeout(()=>{var t;return(t=o==null?void 0:o.parentNode)==null?void 0:t.removeChild(o)},2e3)}function Je(e,o=!0){const t=document.createElement("div");return t.id="color-pipette-tooltip-container",t.innerHTML=e,t.style=`
    position: fixed;
    left: 50%;
    top: 9%;
    z-index: 10002;
    display: ${o?"flex":"none"};
    align-items: center;
    background-color: rgba(0,0,0,0.4);
    padding: 6px 12px;
    border-radius: 4px;
    color: #fff;
    font-size: 18px;
    pointer-events: none;
  `,t}const Qe={class:"my-tabs"},Ze={class:"my-tabs__header p-0.5 mb-3 rounded bg-gray-100 cursor-pointers"},et={class:"my-tabs__header-shell relative flex justify-between"},tt=["onClick"],nt={class:"my-tabs__content"},ot={name:"Tabs"},at=Object.assign(ot,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup(e,{expose:o,emit:t}){const a=e;j(()=>a.value,()=>{p()});const l=m([]),n=_e({width:0,left:0});let s=0;he(()=>{s=100/l.value.length,n.width=`${s}%`,p()});let d=null;async function p(u=-1){var f,_,k,b;u<0&&(u=l.value.findIndex(w=>w.props.label===a.value)),n.left=`${s*u}%`;try{await Ee(),(_=(f=d==null?void 0:d.exposed)==null?void 0:f.changeActive)==null||_.call(f,!1),d=l.value[u],(b=(k=d.exposed)==null?void 0:k.changeActive)==null||b.call(k,!0)}catch{}}function g(u,f){t("update:value",u.props.label),p(f)}return o({tabs:l}),(u,f)=>(x(),$("div",Qe,[v("div",Ze,[v("div",et,[(x(!0),$(z,null,F(l.value,(_,k)=>(x(),$("div",{key:_.props.label,class:me(["my-tab__title relative flex-auto py-1 text-center",{"my-active":_.props.label===e.value}]),onClick:b=>g(_,k)},ye(_.props.label),11,tt))),128)),v("div",{class:"my-tab__slider",style:D(n)},null,4)])]),v("div",nt,[ge(u.$slots,"default",{},void 0,!0)])]))}});var lt=ne(at,[["__scopeId","data-v-4ec49efa"]]);const st=Pe({setup(){}}),rt={t:"1685345224620",class:"sd-xggj",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8489",width:"20",height:"20"},ut=v("path",{d:"M716.288 140.501333a42.666667 42.666667 0 0 1 60.373333 0l90.496 90.496a42.666667 42.666667 0 0 1 0 60.330667l-120.661333 120.704L595.626667 261.12l120.661333-120.661333zM520.192 185.770667l301.696 301.653333-60.330667 60.373333-301.653333-301.696 60.288-60.330666z","p-id":"8490"},null,-1),it=v("path",{d:"M580.565333 366.762667l-60.373333-60.330667-362.026667 362.026667V853.333333l181.034667-3.84 362.026667-362.026666-60.330667-60.373334-331.861333 331.904-60.373334-60.373333 331.904-331.861333z","p-id":"8491"},null,-1),ct=[ut,it];function dt(e,o,t,a,l,n){return x(),$("svg",rt,ct)}var ft=ne(st,[["render",dt]]);const vt={name:"TabPanel"},pt=Object.assign(vt,{props:{label:{type:String,required:!0}},setup(e,{expose:o}){const t=De();t.parent.exposed.tabs.value.push(t);const a=m(!1),l=Z(()=>({display:a.value?"block":"none"}));function n(s){a.value=s}return o({changeActive:n}),(s,d)=>(x(),$("div",{class:"tab-panel",style:D(l.value)},[ge(s.$slots,"default")],4))}});function _t(e,o,t){var a=t||{},l=a.noTrailing,n=l===void 0?!1:l,s=a.noLeading,d=s===void 0?!1:s,p=a.debounceMode,g=p===void 0?void 0:p,u,f=!1,_=0;function k(){u&&clearTimeout(u)}function b(H){var M=H||{},S=M.upcomingOnly,G=S===void 0?!1:S;k(),f=!G}function w(){for(var H=arguments.length,M=new Array(H),S=0;S<H;S++)M[S]=arguments[S];var G=this,L=Date.now()-_;if(f)return;function A(){_=Date.now(),o.apply(G,M)}function T(){u=void 0}!d&&g&&!u&&A(),k(),g===void 0&&L>e?d?(_=Date.now(),n||(u=setTimeout(g?T:A,e))):A():n!==!0&&(u=setTimeout(g?T:A,g===void 0?e-L:e))}return w.cancel=b,w}function ht(e,o,t){var a=t||{},l=a.atBegin,n=l===void 0?!1:l;return _t(e,o,{debounceMode:n!==!1})}const $e=e=>(ze("data-v-6b6d2061"),e=e(),Fe(),e),gt={class:"color-picker"},mt={class:"title"},yt={key:1,class:"cp__gradient flex-center"},xt={class:"cp__gradient-bar w-48",style:{height:"16px"}},bt=["data-sort","onMousedown","onKeyup"],$t=$e(()=>v("div",{class:"cpp__color-saturation"},null,-1)),kt=$e(()=>v("div",{class:"cpp__color-value"},null,-1)),wt={class:"cps__track"},St={class:"cps__track"},Ct={class:"cp__box"},Mt=["value"],At=["onClick"],Bt={name:"ColorPicker",inheritAttrs:!1},Ht=Object.assign(Bt,{props:{value:{type:String,default:"#ffffffff"},modes:{type:Array,default:()=>["\u7EAF\u8272","\u6E10\u53D8"]},defaultColor:{type:String,default:"#ffffffff"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value","native-pick"],setup(e,{emit:o}){const t=e,a=m(ve(t.value)),l=m(90),n=m([]),s=_e({h:0,s:0,l:0,a:0}),d=m("#f00"),p=m("#000"),g=m(0);let u=m({});const f="EyeDropper"in window,_=m(),k=m(),b=m(),w=m(),H=m(),M=m(),S=m();let G=null,L=null,A=null,T=null,O=null,q=!0,W=null;const N=m([]),I={color:t.defaultColor,gradient:t.defaultGradient,image:t.defaultImage},oe=Z(()=>t.modes.includes("\u6E10\u53D8")),ke=Z(()=>{const r=ee(p.value).join(",");return{background:`linear-gradient(to right, rgba(${r}, 0) 0%, rgb(${r}) 100%)`}});j(u,r=>{X(r.color)}),j(p,r=>{Ge(r)}),j(()=>t.value,r=>{const i=ve(r);i!==a.value&&(a.value=i),ae(i),K(r),we(r)});const we=ht(300,async r=>{const i=N.value,c=i.indexOf(r);c!==-1&&N.value.splice(c,1),i.length>=4&&N.value.splice(i.length-1,1);const h=[r];N.value=h.concat(i)}),Se=j(s,Ce,{deep:!0});function Ce(r){const i=Ue(...Object.values(r));let c;a.value==="\u7EAF\u8272"?c=i:a.value==="\u6E10\u53D8"&&(u.value.color=i,c=pe(l.value,n.value)),le(i),U(c)}he(Me);async function Me(){b.value.style.left=`${s.s}%`,b.value.style.top=`${100-s.l}%`,w.value.style.left=`${s.h/360*100}%`,M.value.style.left=`${s.a*100}%`,oe.value&&(G=V(_.value,{onmousedown:r,onmousemove:i,onmouseup:c}));function r(y){if(O)return;const B=n.value.findIndex(P=>P.offset>=y.x),E=n.value[B-1],R=te(E.color),re=n.value[B],ue=te(re.color),ie=[];for(let P=0;P<3;P+=1)ie.push(R[P]+(ue[P]-R[P])*y.x);const Le=re.offset-y.x-(y.x-E.offset)>0?R[3]:ue[3],Te=fe(...ie,Le);u.value={color:Te,offset:y.x},n.value.splice(B,0,u.value)}function i(y){if(!O)return;u.value.offset=y.x,n.value.sort((E,R)=>E.offset-R.offset);const B=pe(l.value,n.value);U(B)}function c(){O=!1}L=V(k.value,{onmousemove:h,onmouseup:h});function h(y){Y();const B=y.x*100,E=y.y*100;s.s=Math.round(B),s.l=Math.round(100-E),b.value.style.left=`${B}%`,b.value.style.top=`${E}%`}A=V(H.value,{onmousemove:C,onmouseup:C});function C(y){Y(),s.h=y.x*360,w.value.style.left=`${y.x*100}%`}T=V(S.value,{onmousemove:se,onmouseup:se});function se(y){Y(),s.a=y.x,M.value.style.left=`${y.x*100}%`}ae(a.value),K(t.value)}Ie(()=>{L==null||L.destroy(),A==null||A.destroy(),T==null||T.destroy(),Se(),G&&G.destroy()});function K(r){a.value==="\u7EAF\u8272"?I.color=r:a.value==="\u6E10\u53D8"?I.gradient=r:a.value==="\u56FE\u6848"&&(I.image=r)}function U(r){r!==t.value&&(K(r),o("update:value",r))}async function Ae(r){if(r===a.value)return;a.value=r;let i;r==="\u7EAF\u8272"?i=I.color:r==="\u6E10\u53D8"?i=I.gradient:r==="\u56FE\u6848"&&(i=I.image),U(i)}function ae(r){r==="\u7EAF\u8272"?X(t.value):r==="\u6E10\u53D8"&&(n.value.length===0?t.value.match(/[^,]+/g).forEach((i,c)=>{if(c===0){l.value=Number(i.match(/\d+/)[0]);return}let[h,C]=i.trim().split(" ");h.startsWith("#")||(h=fe(h)),C=C.match(/\d+/)[0]/100,n.value.push({color:h,offset:C}),u.value=n.value[0]}):X(u.value.color))}function le(r){var i;d.value=`hsl(${s.h}, 100%, 50%)`,p.value=r.slice(0,7),p.value,g.value=Math.round(((i=s.a)!=null?i:1)*100)}function X(r){if(q){const i=Xe(r);s.h=i[0],s.s=i[1],s.l=i[2],s.a=i[3],le(r);let c=s.s;const h=Math.round(100-s.l);b.value.style.left=`${c}%`,b.value.style.top=`${h}%`,c=s.h/360,w.value.style.left=`${c*100}%`,M.value.style.left=`${s.a*100}%`}}function Be(r){O=!0,u.value=r}function He(r){if(!["Backspace","Delete"].includes(r.key)||n.value.length===2)return;const i=n.value.indexOf(u.value);n.value.splice(i,1),u.value=n.value[0]}function Ge(r){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(r)){const i=ee(r),[c,h,C]=be(...i);s.h=c,s.s=h,s.l=C,b.value.style.left=`${s.s}%`,b.value.style.top=`${100-s.l}%`,w.value.style.left=`${s.h/360*100}%`,p.value=r}}function Y(){q=!1,W&&clearTimeout(W),W=setTimeout(()=>{q=!0},16)}async function J(r){let i="";if(r&&r.target.value){const c=r.target.value;i=c+(c.length===7?"ff":"")}else{const c=new window.EyeDropper;Ye("\u6309Esc\u53EF\u9000\u51FA");try{i=(await c.open()).sRGBHex+"ff"}catch{console.log("\u7528\u6237\u53D6\u6D88\u4E86\u53D6\u8272")}}o("update:value",i),o("native-pick",i)}return(r,i)=>(x(),$("div",gt,[v("div",mt,ye(a.value),1),e.modes.length>1?(x(),Q(lt,{key:0,value:a.value,"onUpdate:value":Ae},{default:Ne(()=>[(x(!0),$(z,null,F(e.modes,c=>(x(),Q(pt,{key:c,label:c},null,8,["label"]))),128))]),_:1},8,["value"])):ce("",!0),oe.value?Re((x(),$("div",yt,[v("div",xt,[v("div",{ref_key:"elGradientTrack",ref:_,class:"cpgb__track h-full",style:D([{width:"100%"},{background:e.value}])},[(x(!0),$(z,null,F(n.value,(c,h)=>(x(),$("div",{key:h,class:me(["cpgb__pointer",{"cpgb__pointer--active":c===Oe(u)}]),"data-sort":h,style:D({left:`${c.offset*100}%`,background:c.color}),tabindex:"-1",onMousedown:C=>Be(c),onKeyup:Ve(He,["stop"])},null,46,bt))),128))],4)])],512)),[[je,a.value==="\u6E10\u53D8"]]):ce("",!0),v("div",{ref_key:"elPalette",ref:k,class:"cp__palette",style:D({background:d.value})},[$t,kt,v("div",{ref_key:"elPalettePointer",ref:b,class:"cpp__pointer"},null,512)],4),v("div",{ref_key:"elSliderHux",ref:H,class:"cp__slider cp__slider-hux"},[v("div",wt,[v("div",{ref_key:"elSliderHuxPointer",ref:w,class:"cpst__pointer"},null,512)])],512),v("div",{ref_key:"elSliderAlpha",ref:S,class:"cp__slider cp__slider-alpha"},[v("div",{class:"cpsa__background",style:D(ke.value)},null,4),v("div",St,[v("div",{ref_key:"elSliderAlphaPointer",ref:M,class:"cpst__pointer"},null,512)])],512),v("div",Ct,[v("div",{class:"item",onClick:J},[f?(x(),Q(ft,{key:0})):(x(),$("input",{key:1,class:"native",type:"color",onInput:J},null,32))]),v("input",{value:e.value,onInput:i[0]||(i[0]=c=>r.$emit("update:value",c.target.value)),class:"input"},null,40,Mt),(x(!0),$(z,null,F(N.value,c=>(x(),$("div",{key:c,class:"item",style:D({background:c}),onClick:h=>J({target:{value:c}})},null,12,At))),128))])]))}});var Lt=ne(Ht,[["__scopeId","data-v-6b6d2061"]]);export{Lt as C};
