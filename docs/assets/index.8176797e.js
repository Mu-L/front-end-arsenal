import{p as e,k as t,w as l,g as n,h as a,C as o,n as u,o as s,m as i,s as r,F as c,z as d,x as v,t as f,E as p,G as m,H as g,e as h,j as y,I as b,J as x,b as _,K as w,A as k,q as M,L as $,M as C,N as E,y as N}from"./vendor.36140111.js";const j=(e,{decimal:t=0}={})=>t>0?Number(e.toFixed(t)):Math.round(e),S=(e,{onmousedown:t,onmousemove:l,onmouseup:n}={})=>{let a=e.getBoundingClientRect();const o={x:0,y:0},u=e=>{let t=e.pageX-a.x,l=e.pageY-a.y;t<0&&(t=0),t>a.width&&(t=a.width),l<0&&(l=0),l>a.height&&(l=a.height),o.x=j(t/a.width,{decimal:2}),o.y=j(l/a.height,{decimal:2})},s=e=>{u(e),l&&l(o,e)},i=e=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",i),n&&n(o,e)},r=l=>{a=e.getBoundingClientRect(),u(l),document.addEventListener("mousemove",s),document.addEventListener("mouseup",i),t&&t(o,l)};return e.addEventListener("mousedown",r),{destroy(){e.removeEventListener("mousedown",r)}}},L=(e,t,l)=>{let n=Math.round(e).toString(16),a=Math.round(t).toString(16),o=Math.round(l).toString(16);return 1===n.length&&(n="0"+n),1===a.length&&(a="0"+a),1===o.length&&(o="0"+o),"#"+n+a+o},T=(e,t,l,n=1)=>{const a=L(e,t,l);let o=Math.round(255*n).toString(16);return 1===o.length&&(o="0"+o),a+o},I=(e,t,l)=>{e/=255,t/=255,l/=255;const n=Math.min(e,t,l),a=Math.max(e,t,l),o=a-n;let u=0,s=0;if(0===o)u=s=0;else{s=o/a;const n=((a-e)/6+o/2)/o,i=((a-t)/6+o/2)/o,r=((a-l)/6+o/2)/o;e===a?u=r-i:t===a?u=1/3+n-r:l===a&&(u=2/3+i-n),u<0?u+=1:u>1&&(u-=1)}return[360*u,100*s,100*a]};const A=(e,t,l)=>{const[n,a,o]=function(e,t,l){e=e/360*6,t/=100,l/=100;const n=Math.floor(e),a=e-n,o=l*(1-t),u=l*(1-a*t),s=l*(1-(1-a)*t),i=n%6,r=[l,u,o,o,s,l][i],c=[s,l,l,u,o,o][i],d=[o,o,s,l,l,u][i];return[Math.round(255*r),Math.round(255*c),Math.round(255*d)]}(e,t,l);return L(n,a,o)},O=e=>{let t=0,l=0,n=0;return 4==(e=e.slice(0,7)).length?(t=Number("0x"+e[1]+e[1]),l=Number("0x"+e[2]+e[2]),n=Number("0x"+e[3]+e[3])):7==e.length&&(t=Number("0x"+e[1]+e[2]),l=Number("0x"+e[3]+e[4]),n=Number("0x"+e[5]+e[6])),[t,l,n]},z=e=>{const t=O(e),l=Number("0x"+e[7]+e[8]);return[...t,Number((l/255).toFixed(2))]},B=e=>{const[t,l,n,a]=z(e);return((e,t,l,n=1)=>[...I(e,t,l),n])(t,l,n,a)},D=e=>e.startsWith("#")?"纯色":e.startsWith("linear-gradient")?"渐变":"图案",G=(e,t)=>{const l=[];return t.forEach((e=>{l.push(`${e.color} ${100*e.offset}%`)})),`linear-gradient(${e}deg, ${l.join(",")})`};function q(e){const t=function(e,t=!0){const l=document.createElement("div");return l.id="color-pipette-tooltip-container",l.innerHTML=e,l.style=`\n    position: fixed;\n    left: 50%;\n    top: 9%;\n    z-index: 10002;\n    display: ${t?"flex":"none"};\n    align-items: center;\n    background-color: rgba(0,0,0,0.4);\n    padding: 6px 12px;\n    border-radius: 4px;\n    color: #fff;\n    font-size: 18px;\n    pointer-events: none;\n  `,l}(e);document.body.appendChild(t),setTimeout((()=>{var e;return null==(e=null==t?void 0:t.parentNode)?void 0:e.removeChild(t)}),2e3)}e("data-v-4ec49efa");const F={class:"my-tabs"},H={class:"my-tabs__header p-0.5 mb-3 rounded bg-gray-100 cursor-pointers"},K={class:"my-tabs__header-shell relative flex justify-between"},R=["onClick"],W={class:"my-tabs__content"};t();const P={name:"Tabs"};const U=Object.assign(P,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup:function(e,{expose:t,emit:h}){const y=e;l((()=>y.value),(()=>{k()}));const b=n([]),x=a({width:0,left:0});let _=0;o((()=>{_=100/b.value.length,x.width=`${_}%`,k()}));let w=null;async function k(e=-1){var t,l,n,a;e<0&&(e=b.value.findIndex((e=>e.props.label===y.value))),x.left=_*e+"%";try{await u(),null==(l=null==(t=null==w?void 0:w.exposed)?void 0:t.changeActive)||l.call(t,!1),w=b.value[e],null==(a=null==(n=w.exposed)?void 0:n.changeActive)||a.call(n,!0)}catch(o){}}return t({tabs:b}),(t,l)=>(s(),i("div",F,[r("div",H,[r("div",K,[(s(!0),i(c,null,d(b.value,((t,l)=>(s(),i("div",{key:t.props.label,class:v(["my-tab__title relative flex-auto py-1 text-center",{"my-active":t.props.label===e.value}]),onClick:e=>function(e,t){h("update:value",e.props.label),k(t)}(t,l)},f(t.props.label),11,R)))),128)),r("div",{class:"my-tab__slider",style:p(m(x))},null,4)])]),r("div",W,[g(t.$slots,"default",{},void 0,!0)])]))}});U.__scopeId="data-v-4ec49efa";var V=h({setup(){}});const J={t:"1685345224620",class:"sd-xggj",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8489",width:"20",height:"20"},X=[r("path",{d:"M716.288 140.501333a42.666667 42.666667 0 0 1 60.373333 0l90.496 90.496a42.666667 42.666667 0 0 1 0 60.330667l-120.661333 120.704L595.626667 261.12l120.661333-120.661333zM520.192 185.770667l301.696 301.653333-60.330667 60.373333-301.653333-301.696 60.288-60.330666z","p-id":"8490"},null,-1),r("path",{d:"M580.565333 366.762667l-60.373333-60.330667-362.026667 362.026667V853.333333l181.034667-3.84 362.026667-362.026666-60.330667-60.373334-331.861333 331.904-60.373334-60.373333 331.904-331.861333z","p-id":"8491"},null,-1)];V.render=function(e,t,l,n,a,o){return s(),i("svg",J,X)};const Y={name:"TabPanel"};const Q=Object.assign(Y,{props:{label:{type:String,required:!0}},setup:function(e,{expose:t}){const l=b();l.parent.exposed.tabs.value.push(l);const a=n(!1),o=y((()=>({display:a.value?"block":"none"})));return t({changeActive:function(e){a.value=e}}),(e,t)=>(s(),i("div",{class:"tab-panel",style:p(m(o))},[g(e.$slots,"default")],4))}});function Z(e,t,l){var n=(l||{}).atBegin;return function(e,t,l){var n,a=l||{},o=a.noTrailing,u=void 0!==o&&o,s=a.noLeading,i=void 0!==s&&s,r=a.debounceMode,c=void 0===r?void 0:r,d=!1,v=0;function f(){n&&clearTimeout(n)}function p(){for(var l=arguments.length,a=new Array(l),o=0;o<l;o++)a[o]=arguments[o];var s=this,r=Date.now()-v;function p(){v=Date.now(),t.apply(s,a)}function m(){n=void 0}d||(i||!c||n||p(),f(),void 0===c&&r>e?i?(v=Date.now(),u||(n=setTimeout(c?m:p,e))):p():!0!==u&&(n=setTimeout(c?m:p,void 0===c?e-r:e)))}return p.cancel=function(e){var t=(e||{}).upcomingOnly,l=void 0!==t&&t;f(),d=!l},p}(e,t,{debounceMode:!1!==(void 0!==n&&n)})}e("data-v-277677b8");const ee={class:"color-picker"},te={class:"title"},le={key:1,class:"cp__gradient flex-center"},ne={class:"cp__gradient-bar w-48",style:{height:"16px"}},ae=["data-sort","onMousedown","onKeyup"],oe=r("div",{class:"cpp__color-saturation"},null,-1),ue=r("div",{class:"cpp__color-value"},null,-1),se={class:"cps__track"},ie={class:"cps__track"},re={class:"cp__box"},ce=["onClick"];t();const de={name:"ColorPicker",inheritAttrs:!1};const ve=Object.assign(de,{props:{value:{type:String,default:"#ffffffff"},modes:{type:Array,default:()=>["纯色","渐变"]},defaultColor:{type:String,default:"#ffffffff"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value","native-pick"],setup:function(e,{emit:t}){const u=e,g=n(D(u.value)),h=n(90),b=n([]),j=a({h:0,s:0,l:0,a:0}),L=n("#f00"),F=n("#000"),H=n(0);let K=n({});const R="EyeDropper"in window,W=n(),P=n(),J=n(),X=n(),Y=n(),de=n(),ve=n();let fe=null,pe=null,me=null,ge=null,he=null,ye=!0,be=null;const xe=n([]),_e={color:u.defaultColor,gradient:u.defaultGradient,image:u.defaultImage},we=y((()=>u.modes.includes("渐变"))),ke=y((()=>{const e=O(F.value).join(",");return{background:`linear-gradient(to right, rgba(${e}, 0) 0%, rgb(${e}) 100%)`}}));l(K,(e=>{Le(e.color)})),l(F,(e=>{!function(e){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(e)){const t=O(e),[l,n,a]=I(...t);j.h=l,j.s=n,j.l=a,J.value.style.left=`${j.s}%`,J.value.style.top=100-j.l+"%",X.value.style.left=j.h/360*100+"%",F.value=e}}(e)})),l((()=>u.value),(e=>{const t=D(e);t!==g.value&&(g.value=t),je(t),Ce(e),Me(e)}));const Me=Z(300,(async e=>{const t=xe.value,l=t.indexOf(e);-1!==l&&xe.value.splice(l,1),t.length>=4&&xe.value.splice(t.length-1,1);const n=[e];xe.value=n.concat(t)})),$e=l(j,(function(e){const t=((e,t,l,n=1)=>`${A(e,t,l)}${0===n?"00":Math.round(255*n).toString(16)}`)(...Object.values(e));let l;"纯色"===g.value?l=t:"渐变"===g.value&&(K.value.color=t,l=G(h.value,b.value));Se(t),Ee(l)}),{deep:!0});function Ce(e){"纯色"===g.value?_e.color=e:"渐变"===g.value?_e.gradient=e:"图案"===g.value&&(_e.image=e)}function Ee(e){e!==u.value&&(Ce(e),t("update:value",e))}async function Ne(e){if(e===g.value)return;let t;g.value=e,"纯色"===e?t=_e.color:"渐变"===e?t=_e.gradient:"图案"===e&&(t=_e.image),Ee(t)}function je(e){"纯色"===e?Le(u.value):"渐变"===e&&(0===b.value.length?u.value.match(/[^,]+/g).forEach(((e,t)=>{if(0===t)return void(h.value=Number(e.match(/\d+/)[0]));let[l,n]=e.trim().split(" ");l.startsWith("#")||(l=T(l)),n=n.match(/\d+/)[0]/100,b.value.push({color:l,offset:n}),K.value=b.value[0]})):Le(K.value.color))}function Se(e){var t;L.value=`hsl(${j.h}, 100%, 50%)`,F.value=e.slice(0,7),H.value=Math.round(100*(null!=(t=j.a)?t:1))}function Le(e){if(ye){const t=B(e);j.h=t[0],j.s=t[1],j.l=t[2],j.a=t[3],Se(e);let l=j.s;const n=Math.round(100-j.l);J.value.style.left=`${l}%`,J.value.style.top=`${n}%`,l=j.h/360,X.value.style.left=100*l+"%",de.value.style.left=100*j.a+"%"}}function Te(e){if(!["Backspace","Delete"].includes(e.key))return;if(2===b.value.length)return;const t=b.value.indexOf(K.value);b.value.splice(t,1),K.value=b.value[0]}function Ie(){ye=!1,be&&clearTimeout(be),be=setTimeout((()=>{ye=!0}),16)}async function Ae(e){let l="";if(e&&e.target.value){const t=e.target.value;l=t+(7===t.length?"ff":"")}else{const e=new window.EyeDropper;q("按Esc可退出");try{const t=await e.open();l=t.sRGBHex+"ff"}catch(n){console.log("用户取消了取色")}}t("update:value",l),t("native-pick",l)}return o((async function(){J.value.style.left=`${j.s}%`,J.value.style.top=100-j.l+"%",X.value.style.left=j.h/360*100+"%",de.value.style.left=100*j.a+"%",we.value&&(fe=S(W.value,{onmousedown:function(e){if(he)return;const t=b.value.findIndex((t=>t.offset>=e.x)),l=b.value[t-1],n=z(l.color),a=b.value[t],o=z(a.color),u=[];for(let r=0;r<3;r+=1)u.push(n[r]+(o[r]-n[r])*e.x);const s=a.offset-e.x-(e.x-l.offset)>0?n[3]:o[3],i=T(...u,s);K.value={color:i,offset:e.x},b.value.splice(t,0,K.value)},onmousemove:function(e){if(!he)return;K.value.offset=e.x,b.value.sort(((e,t)=>e.offset-t.offset));Ee(G(h.value,b.value))},onmouseup:function(){he=!1}}));function e(e){Ie();const t=100*e.x,l=100*e.y;j.s=Math.round(t),j.l=Math.round(100-l),J.value.style.left=`${t}%`,J.value.style.top=`${l}%`}function t(e){Ie(),j.h=360*e.x,X.value.style.left=100*e.x+"%"}function l(e){Ie(),j.a=e.x,de.value.style.left=100*e.x+"%"}pe=S(P.value,{onmousemove:e,onmouseup:e}),me=S(Y.value,{onmousemove:t,onmouseup:t}),ge=S(ve.value,{onmousemove:l,onmouseup:l}),je(g.value),Ce(u.value)})),x((()=>{null==pe||pe.destroy(),null==me||me.destroy(),null==ge||ge.destroy(),$e(),fe&&fe.destroy()})),(t,l)=>(s(),i("div",ee,[r("div",te,f(g.value),1),e.modes.length>1?(s(),_(U,{key:0,value:g.value,"onUpdate:value":Ne},{default:w((()=>[(s(!0),i(c,null,d(e.modes,(e=>(s(),_(Q,{key:e,label:e},null,8,["label"])))),128))])),_:1},8,["value"])):k("",!0),m(we)?M((s(),i("div",le,[r("div",ne,[r("div",{ref:W,class:"cpgb__track h-full",style:p([{width:"100%"},{background:e.value}])},[(s(!0),i(c,null,d(b.value,((e,t)=>(s(),i("div",{key:t,class:v(["cpgb__pointer",{"cpgb__pointer--active":e===m(K)}]),"data-sort":t,style:p({left:100*e.offset+"%",background:e.color}),tabindex:"-1",onMousedown:t=>{return l=e,he=!0,void(K.value=l);var l},onKeyup:N(Te,["stop"])},null,46,ae)))),128))],4)])],512)),[[$,"渐变"===g.value]]):k("",!0),r("div",{ref:P,class:"cp__palette",style:p({background:L.value})},[oe,ue,r("div",{ref:J,class:"cpp__pointer"},null,512)],4),r("div",{ref:Y,class:"cp__slider cp__slider-hux"},[r("div",se,[r("div",{ref:X,class:"cpst__pointer"},null,512)])],512),r("div",{ref:ve,class:"cp__slider cp__slider-alpha"},[r("div",{class:"cpsa__background",style:p(m(ke))},null,4),r("div",ie,[r("div",{ref:de,class:"cpst__pointer"},null,512)])],512),r("div",re,[r("div",{class:"item",onClick:Ae},[R?(s(),_(V,{key:0})):(s(),i("input",{key:1,class:"native",type:"color",onInput:Ae},null,32))]),M(r("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>E(value)?value.value=e:null),class:"input"},null,512),[[C,e.value]]),(s(!0),i(c,null,d(xe.value,(e=>(s(),i("div",{key:e,class:"item",style:p({background:e}),onClick:t=>Ae({target:{value:e}})},null,12,ce)))),128))])]))}});ve.__scopeId="data-v-277677b8";var fe=ve;export{fe as C};
