import{w as j,b as y,e as ge,z as me,q as Re,o as g,h as b,j as v,F as W,l as q,B as I,C as ye,_ as le,n as xe,t as be,d as je,f as te,D as Ve,E as Oe,c as Q,G as ze,i as fe,H as Fe,I as Z,J as We,m as ve,k as qe,s as Ke,x as Ue}from"./index.9048c798.js";const pe=(e,{decimal:l=0}={})=>l>0?Number(e.toFixed(l)):Math.round(e),F=(e,{onmousedown:l,onmousemove:t,onmouseup:o}={})=>{let s=e.getBoundingClientRect();const n={x:0,y:0},u=i=>{let f=i.pageX-s.x,_=i.pageY-s.y;f<0&&(f=0),f>s.width&&(f=s.width),_<0&&(_=0),_>s.height&&(_=s.height),n.x=pe(f/s.width,{decimal:2}),n.y=pe(_/s.height,{decimal:2})},d=i=>{u(i),t&&t(n,i)},p=i=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",p),o&&o(n,i)},m=i=>{s=e.getBoundingClientRect(),u(i),document.addEventListener("mousemove",d),document.addEventListener("mouseup",p),l&&l(n,i)};return e.addEventListener("mousedown",m),{destroy(){e.removeEventListener("mousedown",m)}}},$e=(e,l,t)=>{let o=Math.round(e).toString(16),s=Math.round(l).toString(16),n=Math.round(t).toString(16);return o.length===1&&(o="0"+o),s.length===1&&(s="0"+s),n.length===1&&(n="0"+n),"#"+o+s+n},_e=(e,l,t,o=1)=>{const s=$e(e,l,t);let n=Math.round(o*255).toString(16);return n.length===1&&(n="0"+n),s+n},ke=(e,l,t)=>{e/=255,l/=255,t/=255;const o=Math.min(e,l,t),s=Math.max(e,l,t),n=s-o;let u=0,d=0;const p=s;if(n===0)u=d=0;else{d=n/s;const m=((s-e)/6+n/2)/n,i=((s-l)/6+n/2)/n,f=((s-t)/6+n/2)/n;e===s?u=f-i:l===s?u=1/3+m-f:t===s&&(u=2/3+i-m),u<0?u+=1:u>1&&(u-=1)}return[u*360,d*100,p*100]},Je=(e,l,t,o=1)=>[...ke(e,l,t),o];function Xe(e,l,t){e=e/360*6,l/=100,t/=100;const o=Math.floor(e),s=e-o,n=t*(1-l),u=t*(1-s*l),d=t*(1-(1-s)*l),p=o%6,m=[t,u,n,n,d,t][p],i=[d,t,t,u,n,n][p],f=[n,n,d,t,t,u][p];return[Math.round(m*255),Math.round(i*255),Math.round(f*255)]}const Ye=(e,l,t)=>{const[o,s,n]=Xe(e,l,t);return $e(o,s,n)},Qe=(e,l,t,o=1)=>`${Ye(e,l,t)}${o===0?"00":Math.round(o*255).toString(16)}`,ne=e=>{e=e.slice(0,7);let l=0,t=0,o=0;return e.length==4?(l=Number("0x"+e[1]+e[1]),t=Number("0x"+e[2]+e[2]),o=Number("0x"+e[3]+e[3])):e.length==7&&(l=Number("0x"+e[1]+e[2]),t=Number("0x"+e[3]+e[4]),o=Number("0x"+e[5]+e[6])),[l,t,o]},oe=e=>{const l=ne(e),t=Number("0x"+e[7]+e[8]);return[...l,Number((t/255).toFixed(2))]},Ze=e=>{const[l,t,o,s]=oe(e);return Je(l,t,o,s)},he=e=>e.startsWith("#")?"\u7EAF\u8272":e.startsWith("linear-gradient")?"\u6E10\u53D8":"\u56FE\u6848",ee=(e,l)=>{const t=[];return l.forEach(o=>{t.push(`${o.color} ${o.offset*100}%`)}),`linear-gradient(${e}deg, ${t.join(",")})`};function et(e){const l=tt(e);document.body.appendChild(l),setTimeout(()=>{var t;return(t=l==null?void 0:l.parentNode)==null?void 0:t.removeChild(l)},2e3)}function tt(e,l=!0){const t=document.createElement("div");return t.id="color-pipette-tooltip-container",t.innerHTML=e,t.style=`
    position: fixed;
    left: 50%;
    top: 9%;
    z-index: 10002;
    display: ${l?"flex":"none"};
    align-items: center;
    background-color: rgba(0,0,0,0.4);
    padding: 6px 12px;
    border-radius: 4px;
    color: #fff;
    font-size: 18px;
    pointer-events: none;
  `,t}const nt={class:"my-tabs"},ot={class:"my-tabs__header p-0.5 mb-3 rounded bg-gray-100 cursor-pointers"},lt={class:"my-tabs__header-shell relative flex justify-between"},at=["onClick"],st={class:"my-tabs__content"},rt={name:"Tabs"},ut=Object.assign(rt,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup(e,{expose:l,emit:t}){const o=e;j(()=>o.value,()=>{p()});const s=y([]),n=ge({width:0,left:0});let u=0;me(()=>{u=100/s.value.length,n.width=`${u}%`,p()});let d=null;async function p(i=-1){var f,_,k,$;i<0&&(i=s.value.findIndex(w=>w.props.label===o.value)),n.left=`${u*i}%`;try{await Re(),(_=(f=d==null?void 0:d.exposed)==null?void 0:f.changeActive)==null||_.call(f,!1),d=s.value[i],($=(k=d.exposed)==null?void 0:k.changeActive)==null||$.call(k,!0)}catch{}}function m(i,f){t("update:value",i.props.label),p(f)}return l({tabs:s}),(i,f)=>(g(),b("div",nt,[v("div",ot,[v("div",lt,[(g(!0),b(W,null,q(s.value,(_,k)=>(g(),b("div",{key:_.props.label,class:xe(["my-tab__title relative flex-auto py-1 text-center",{"my-active":_.props.label===e.value}]),onClick:$=>m(_,k)},be(_.props.label),11,at))),128)),v("div",{class:"my-tab__slider",style:I(n)},null,4)])]),v("div",st,[ye(i.$slots,"default",{},void 0,!0)])]))}});var it=le(ut,[["__scopeId","data-v-7356499f"]]);const ct=je({setup(){}}),dt={t:"1685345224620",class:"sd-xggj",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8489",width:"20",height:"20"},ft=v("path",{d:"M716.288 140.501333a42.666667 42.666667 0 0 1 60.373333 0l90.496 90.496a42.666667 42.666667 0 0 1 0 60.330667l-120.661333 120.704L595.626667 261.12l120.661333-120.661333zM520.192 185.770667l301.696 301.653333-60.330667 60.373333-301.653333-301.696 60.288-60.330666z","p-id":"8490"},null,-1),vt=v("path",{d:"M580.565333 366.762667l-60.373333-60.330667-362.026667 362.026667V853.333333l181.034667-3.84 362.026667-362.026666-60.330667-60.373334-331.861333 331.904-60.373334-60.373333 331.904-331.861333z","p-id":"8491"},null,-1),pt=[ft,vt];function _t(e,l,t,o,s,n){return g(),b("svg",dt,pt)}var ht=le(ct,[["render",_t]]);const gt={name:"TabPanel"},mt=Object.assign(gt,{props:{label:{type:String,required:!0}},setup(e,{expose:l}){const t=Ve();t.parent.exposed.tabs.value.push(t);const o=y(!1),s=te(()=>({display:o.value?"block":"none"}));function n(u){o.value=u}return l({changeActive:n}),(u,d)=>(g(),b("div",{class:"tab-panel",style:I(s.value)},[ye(u.$slots,"default")],4))}});function yt(e,l,t){var o=t||{},s=o.noTrailing,n=s===void 0?!1:s,u=o.noLeading,d=u===void 0?!1:u,p=o.debounceMode,m=p===void 0?void 0:p,i,f=!1,_=0;function k(){i&&clearTimeout(i)}function $(H){var M=H||{},S=M.upcomingOnly,G=S===void 0?!1:S;k(),f=!G}function w(){for(var H=arguments.length,M=new Array(H),S=0;S<H;S++)M[S]=arguments[S];var G=this,L=Date.now()-_;if(f)return;function B(){_=Date.now(),l.apply(G,M)}function T(){i=void 0}!d&&m&&!i&&B(),k(),m===void 0&&L>e?d?(_=Date.now(),n||(i=setTimeout(m?T:B,e))):B():n!==!0&&(i=setTimeout(m?T:B,m===void 0?e-L:e))}return w.cancel=$,w}function xt(e,l,t){var o=t||{},s=o.atBegin,n=s===void 0?!1:s;return yt(e,l,{debounceMode:n!==!1})}const we=e=>(Ke("data-v-64a57cf4"),e=e(),Ue(),e),bt={class:"color-picker"},$t={key:1,class:"title"},kt={key:2,class:"cp__gradient flex-center"},wt={class:"cp__gradient-bar"},St=["data-sort","onMousedown","onKeyup"],Ct={class:"angle-input-box"},Mt=we(()=>v("div",{class:"cpp__color-saturation"},null,-1)),Bt=we(()=>v("div",{class:"cpp__color-value"},null,-1)),At={class:"cps__track"},Ht={class:"cps__track"},Gt={class:"cp__box"},Lt=["value"],Tt=["value"],Et=["onClick"],Pt={name:"ColorPicker",inheritAttrs:!1},It=Object.assign(Pt,{props:{value:{type:String,default:"#ffffffff"},modes:{type:Array,default:()=>["\u7EAF\u8272","\u6E10\u53D8"]},defaultColor:{type:String,default:"#ffffffff"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value","change","native-pick","blur"],setup(e,{emit:l}){const t=e,o=y(he(t.value)),s=y(90),n=y([]),u=ge({h:0,s:0,l:0,a:0}),d=y("#f00"),p=y("#000"),m=y(0);let i=y({});const f="EyeDropper"in window,_=y(),k=y(),$=y(),w=y(),H=y(),M=y(),S=y();let G=null,L=null,B=null,T=null,V=null,K=!0,U=null;const D=y([]),N={color:t.defaultColor,gradient:t.defaultGradient,image:t.defaultImage},ae=te(()=>t.modes.includes("\u6E10\u53D8")),Se=te(()=>{const a=ne(p.value).join(",");return{background:`linear-gradient(to right, rgba(${a}, 0) 0%, rgb(${a}) 100%)`}});j(i,a=>{z(a.color)}),j(p,a=>{Te(a)}),j(()=>t.value,a=>{const r=he(a);r!==o.value&&(o.value=r),se(r),J(a),Ce(a)});const Ce=xt(300,async a=>{const r=D.value,c=r.indexOf(a);c!==-1&&D.value.splice(c,1),r.length>=4&&D.value.splice(r.length-1,1);const h=[a];D.value=h.concat(r)}),Me=j(u,Be,{deep:!0});function Be(a){const r=Qe(...Object.values(a));let c;o.value==="\u7EAF\u8272"?c=r:o.value==="\u6E10\u53D8"&&(i.value.color=r,c=ee(s.value,n.value)),re(r),O(c)}me(Ae);async function Ae(){$.value.style.left=`${u.s}%`,$.value.style.top=`${100-u.l}%`,w.value.style.left=`${u.h/360*100}%`,M.value.style.left=`${u.a*100}%`,ae.value&&(G=F(_.value,{onmousedown:a,onmousemove:r,onmouseup:c}));function a(x){if(V)return;const A=n.value.findIndex(P=>P.offset>=x.x),E=n.value[A-1],R=oe(E.color),ie=n.value[A],ce=oe(ie.color),de=[];for(let P=0;P<3;P+=1)de.push(R[P]+(ce[P]-R[P])*x.x);const Ne=ie.offset-x.x-(x.x-E.offset)>0?R[3]:ce[3],De=_e(...de,Ne);i.value={color:De,offset:x.x},n.value.splice(A,0,i.value)}function r(x){if(!V)return;i.value.offset=x.x,n.value.sort((E,R)=>E.offset-R.offset);const A=ee(s.value,n.value);O(A)}function c(){V=!1}L=F(k.value,{onmousemove:h,onmouseup:h});function h(x){X();const A=x.x*100,E=x.y*100;u.s=Math.round(A),u.l=Math.round(100-E),$.value.style.left=`${A}%`,$.value.style.top=`${E}%`}B=F(H.value,{onmousemove:C,onmouseup:C});function C(x){X(),u.h=x.x*360,w.value.style.left=`${x.x*100}%`}T=F(S.value,{onmousemove:ue,onmouseup:ue});function ue(x){X(),u.a=x.x,M.value.style.left=`${x.x*100}%`}se(o.value),J(t.value)}Oe(()=>{L==null||L.destroy(),B==null||B.destroy(),T==null||T.destroy(),Me(),G&&G.destroy()});function J(a){o.value==="\u7EAF\u8272"?N.color=a:o.value==="\u6E10\u53D8"?N.gradient=a:o.value==="\u56FE\u6848"&&(N.image=a)}function O(a){a!==t.value&&(J(a),l("update:value",a),l("change",{mode:o.value,color:a,angle:Number(s.value),stops:n.value}))}async function He(a){if(a===o.value)return;o.value=a;let r;a==="\u7EAF\u8272"?r=N.color:a==="\u6E10\u53D8"?r=N.gradient:a==="\u56FE\u6848"&&(r=N.image),O(r)}function se(a){a==="\u7EAF\u8272"?z(t.value):a==="\u6E10\u53D8"&&(n.value.length===0?t.value.match(/[^,]+/g).forEach((r,c)=>{if(c===0){s.value=Number(r.match(/\d+/)[0]);return}let[h,C]=r.trim().split(" ");h.startsWith("#")||(h=_e(h)),C=C.match(/\d+/)[0]/100,n.value.push({color:h,offset:C}),i.value=n.value[0]}):z(i.value.color))}function re(a){var r;d.value=`hsl(${u.h}, 100%, 50%)`,p.value=a.slice(0,7),p.value,m.value=Math.round(((r=u.a)!=null?r:1)*100)}function z(a){if(K){const r=Ze(a);u.h=r[0],u.s=r[1],u.l=r[2],u.a=r[3],re(a);let c=u.s;const h=Math.round(100-u.l);$.value.style.left=`${c}%`,$.value.style.top=`${h}%`,c=u.h/360,w.value.style.left=`${c*100}%`,M.value.style.left=`${u.a*100}%`}}function Ge(a){V=!0,i.value=a}function Le(a){if(!["Backspace","Delete"].includes(a.key)||n.value.length===2)return;const r=n.value.indexOf(i.value);n.value.splice(r,1),i.value=n.value[0]}function Te(a){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(a)){const r=ne(a),[c,h,C]=ke(...r);u.h=c,u.s=h,u.l=C,$.value.style.left=`${u.s}%`,$.value.style.top=`${100-u.l}%`,w.value.style.left=`${u.h/360*100}%`,p.value=a}}function X(){K=!1,U&&clearTimeout(U),U=setTimeout(()=>{K=!0},16)}async function Y(a){let r="";if(a&&a.target.value){const c=a.target.value;r=c+(c.length===7?"ff":"")}else{const c=new window.EyeDropper;et("\u6309Esc\u53EF\u9000\u51FA");try{r=(await c.open()).sRGBHex+"ff"}catch{console.log("\u7528\u6237\u53D6\u6D88\u4E86\u53D6\u8272")}}o.value==="\u6E10\u53D8"?(i.value.color=r,i.value={...i.value}):l("update:value",r),l("native-pick",r)}const Ee=a=>{const r=Pe(a.target.value);l("blur",r),l("update:value",r)};function Pe(a){let r=a.replace(/\s/g,"");return a.startsWith("#")||(r="#"+r),r.length<9&&(r=r.padEnd(9,"f")),r}function Ie(){O(ee(s.value,n.value))}return(a,r)=>(g(),b("div",bt,[e.modes.length>1?(g(),Q(it,{key:0,value:o.value,"onUpdate:value":He},{default:ze(()=>[(g(!0),b(W,null,q(e.modes,c=>(g(),Q(mt,{key:c,label:c},null,8,["label"]))),128))]),_:1},8,["value"])):(g(),b("div",$t,be(o.value),1)),ae.value?fe((g(),b("div",kt,[v("div",wt,[v("div",{ref_key:"elGradientTrack",ref:_,class:"cpgb__track",style:I([{width:"100%"},{background:e.value}])},[(g(!0),b(W,null,q(n.value,(c,h)=>(g(),b("div",{key:h,class:xe(["cpgb__pointer",{"cpgb__pointer--active":c===Z(i)}]),"data-sort":h,style:I({left:`${c.offset*100}%`,background:c.color}),tabindex:"-1",onMousedown:C=>Ge(c),onKeyup:qe(Le,["stop"])},null,46,St))),128))],4)]),v("div",Ct,[fe(v("input",{"onUpdate:modelValue":r[0]||(r[0]=c=>s.value=c),class:"angle-input",onInput:Ie,onBlur:r[1]||(r[1]=c=>z(Z(i).color))},null,544),[[We,s.value]])])],512)),[[Fe,o.value==="\u6E10\u53D8"]]):ve("",!0),v("div",{ref_key:"elPalette",ref:k,class:"cp__palette",style:I({background:d.value})},[Mt,Bt,v("div",{ref_key:"elPalettePointer",ref:$,class:"cpp__pointer"},null,512)],4),v("div",{ref_key:"elSliderHux",ref:H,class:"cp__slider cp__slider-hux"},[v("div",At,[v("div",{ref_key:"elSliderHuxPointer",ref:w,class:"cpst__pointer"},null,512)])],512),v("div",{ref_key:"elSliderAlpha",ref:S,class:"cp__slider cp__slider-alpha"},[v("div",{class:"cpsa__background",style:I(Se.value)},null,4),v("div",Ht,[v("div",{ref_key:"elSliderAlphaPointer",ref:M,class:"cpst__pointer"},null,512)])],512),v("div",Gt,[v("div",{class:"item",onClick:Y},[f?(g(),Q(ht,{key:0})):(g(),b("input",{key:1,class:"native",type:"color",onInput:Y},null,32))]),o.value==="\u6E10\u53D8"?(g(),b("input",{key:0,class:"input",value:Z(i).color},null,8,Lt)):(g(),b("input",{key:1,value:e.value,class:"input",onBlur:Ee},null,40,Tt)),o.value==="\u7EAF\u8272"?(g(!0),b(W,{key:2},q(D.value,c=>(g(),b("div",{key:c,class:"item item-color",style:I({background:c}),onClick:h=>Y({target:{value:c}})},null,12,Et))),128)):ve("",!0)])]))}});var Dt=le(It,[["__scopeId","data-v-64a57cf4"]]);export{Dt as C};
