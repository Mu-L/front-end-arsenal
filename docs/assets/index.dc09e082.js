import{w as j,b as m,e as _e,z as he,q as De,o as x,h as $,j as v,F as z,l as F,B as D,C as ge,_ as ne,n as me,t as ye,d as Ie,f as Z,D as Ne,E as Re,c as Q,G as je,m as ie,i as Oe,H as Ve,I as ze,k as Fe,s as We,x as qe}from"./index.9e699cfd.js";const de=(e,{decimal:o=0}={})=>o>0?Number(e.toFixed(o)):Math.round(e),V=(e,{onmousedown:o,onmousemove:t,onmouseup:l}={})=>{let s=e.getBoundingClientRect();const n={x:0,y:0},r=c=>{let f=c.pageX-s.x,_=c.pageY-s.y;f<0&&(f=0),f>s.width&&(f=s.width),_<0&&(_=0),_>s.height&&(_=s.height),n.x=de(f/s.width,{decimal:2}),n.y=de(_/s.height,{decimal:2})},d=c=>{r(c),t&&t(n,c)},p=c=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",p),l&&l(n,c)},g=c=>{s=e.getBoundingClientRect(),r(c),document.addEventListener("mousemove",d),document.addEventListener("mouseup",p),o&&o(n,c)};return e.addEventListener("mousedown",g),{destroy(){e.removeEventListener("mousedown",g)}}},xe=(e,o,t)=>{let l=Math.round(e).toString(16),s=Math.round(o).toString(16),n=Math.round(t).toString(16);return l.length===1&&(l="0"+l),s.length===1&&(s="0"+s),n.length===1&&(n="0"+n),"#"+l+s+n},fe=(e,o,t,l=1)=>{const s=xe(e,o,t);let n=Math.round(l*255).toString(16);return n.length===1&&(n="0"+n),s+n},be=(e,o,t)=>{e/=255,o/=255,t/=255;const l=Math.min(e,o,t),s=Math.max(e,o,t),n=s-l;let r=0,d=0;const p=s;if(n===0)r=d=0;else{d=n/s;const g=((s-e)/6+n/2)/n,c=((s-o)/6+n/2)/n,f=((s-t)/6+n/2)/n;e===s?r=f-c:o===s?r=1/3+g-f:t===s&&(r=2/3+c-g),r<0?r+=1:r>1&&(r-=1)}return[r*360,d*100,p*100]},Ke=(e,o,t,l=1)=>[...be(e,o,t),l];function Ue(e,o,t){e=e/360*6,o/=100,t/=100;const l=Math.floor(e),s=e-l,n=t*(1-o),r=t*(1-s*o),d=t*(1-(1-s)*o),p=l%6,g=[t,r,n,n,d,t][p],c=[d,t,t,r,n,n][p],f=[n,n,d,t,t,r][p];return[Math.round(g*255),Math.round(c*255),Math.round(f*255)]}const Xe=(e,o,t)=>{const[l,s,n]=Ue(e,o,t);return xe(l,s,n)},Ye=(e,o,t,l=1)=>`${Xe(e,o,t)}${l===0?"00":Math.round(l*255).toString(16)}`,ee=e=>{e=e.slice(0,7);let o=0,t=0,l=0;return e.length==4?(o=Number("0x"+e[1]+e[1]),t=Number("0x"+e[2]+e[2]),l=Number("0x"+e[3]+e[3])):e.length==7&&(o=Number("0x"+e[1]+e[2]),t=Number("0x"+e[3]+e[4]),l=Number("0x"+e[5]+e[6])),[o,t,l]},te=e=>{const o=ee(e),t=Number("0x"+e[7]+e[8]);return[...o,Number((t/255).toFixed(2))]},Je=e=>{const[o,t,l,s]=te(e);return Ke(o,t,l,s)},ve=e=>e.startsWith("#")?"\u7EAF\u8272":e.startsWith("linear-gradient")?"\u6E10\u53D8":"\u56FE\u6848",pe=(e,o)=>{const t=[];return o.forEach(l=>{t.push(`${l.color} ${l.offset*100}%`)}),`linear-gradient(${e}deg, ${t.join(",")})`};function Qe(e){const o=Ze(e);document.body.appendChild(o),setTimeout(()=>{var t;return(t=o==null?void 0:o.parentNode)==null?void 0:t.removeChild(o)},2e3)}function Ze(e,o=!0){const t=document.createElement("div");return t.id="color-pipette-tooltip-container",t.innerHTML=e,t.style=`
    position: fixed;
    left: 50%;
    top: 9%;
    z-index: 10002;
    display: ${o?"flex":"none"};
    align-items: center;
    background-color: rgba(0,0,0,0.4);
    padding: 6px 12px;
    border-radius: 4px;
    color: #fff;
    font-size: 18px;
    pointer-events: none;
  `,t}const et={class:"my-tabs"},tt={class:"my-tabs__header p-0.5 mb-3 rounded bg-gray-100 cursor-pointers"},nt={class:"my-tabs__header-shell relative flex justify-between"},ot=["onClick"],lt={class:"my-tabs__content"},at={name:"Tabs"},st=Object.assign(at,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup(e,{expose:o,emit:t}){const l=e;j(()=>l.value,()=>{p()});const s=m([]),n=_e({width:0,left:0});let r=0;he(()=>{r=100/s.value.length,n.width=`${r}%`,p()});let d=null;async function p(c=-1){var f,_,k,b;c<0&&(c=s.value.findIndex(w=>w.props.label===l.value)),n.left=`${r*c}%`;try{await De(),(_=(f=d==null?void 0:d.exposed)==null?void 0:f.changeActive)==null||_.call(f,!1),d=s.value[c],(b=(k=d.exposed)==null?void 0:k.changeActive)==null||b.call(k,!0)}catch{}}function g(c,f){t("update:value",c.props.label),p(f)}return o({tabs:s}),(c,f)=>(x(),$("div",et,[v("div",tt,[v("div",nt,[(x(!0),$(z,null,F(s.value,(_,k)=>(x(),$("div",{key:_.props.label,class:me(["my-tab__title relative flex-auto py-1 text-center",{"my-active":_.props.label===e.value}]),onClick:b=>g(_,k)},ye(_.props.label),11,ot))),128)),v("div",{class:"my-tab__slider",style:D(n)},null,4)])]),v("div",lt,[ge(c.$slots,"default",{},void 0,!0)])]))}});var rt=ne(st,[["__scopeId","data-v-4ec49efa"]]);const ut=Ie({setup(){}}),ct={t:"1685345224620",class:"sd-xggj",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8489",width:"20",height:"20"},it=v("path",{d:"M716.288 140.501333a42.666667 42.666667 0 0 1 60.373333 0l90.496 90.496a42.666667 42.666667 0 0 1 0 60.330667l-120.661333 120.704L595.626667 261.12l120.661333-120.661333zM520.192 185.770667l301.696 301.653333-60.330667 60.373333-301.653333-301.696 60.288-60.330666z","p-id":"8490"},null,-1),dt=v("path",{d:"M580.565333 366.762667l-60.373333-60.330667-362.026667 362.026667V853.333333l181.034667-3.84 362.026667-362.026666-60.330667-60.373334-331.861333 331.904-60.373334-60.373333 331.904-331.861333z","p-id":"8491"},null,-1),ft=[it,dt];function vt(e,o,t,l,s,n){return x(),$("svg",ct,ft)}var pt=ne(ut,[["render",vt]]);const _t={name:"TabPanel"},ht=Object.assign(_t,{props:{label:{type:String,required:!0}},setup(e,{expose:o}){const t=Ne();t.parent.exposed.tabs.value.push(t);const l=m(!1),s=Z(()=>({display:l.value?"block":"none"}));function n(r){l.value=r}return o({changeActive:n}),(r,d)=>(x(),$("div",{class:"tab-panel",style:D(s.value)},[ge(r.$slots,"default")],4))}});function gt(e,o,t){var l=t||{},s=l.noTrailing,n=s===void 0?!1:s,r=l.noLeading,d=r===void 0?!1:r,p=l.debounceMode,g=p===void 0?void 0:p,c,f=!1,_=0;function k(){c&&clearTimeout(c)}function b(H){var M=H||{},S=M.upcomingOnly,G=S===void 0?!1:S;k(),f=!G}function w(){for(var H=arguments.length,M=new Array(H),S=0;S<H;S++)M[S]=arguments[S];var G=this,L=Date.now()-_;if(f)return;function B(){_=Date.now(),o.apply(G,M)}function E(){c=void 0}!d&&g&&!c&&B(),k(),g===void 0&&L>e?d?(_=Date.now(),n||(c=setTimeout(g?E:B,e))):B():n!==!0&&(c=setTimeout(g?E:B,g===void 0?e-L:e))}return w.cancel=b,w}function mt(e,o,t){var l=t||{},s=l.atBegin,n=s===void 0?!1:s;return gt(e,o,{debounceMode:n!==!1})}const $e=e=>(We("data-v-2540b8c8"),e=e(),qe(),e),yt={class:"color-picker"},xt={class:"title"},bt={key:1,class:"cp__gradient flex-center"},$t={class:"cp__gradient-bar w-48",style:{height:"16px"}},kt=["data-sort","onMousedown","onKeyup"],wt=$e(()=>v("div",{class:"cpp__color-saturation"},null,-1)),St=$e(()=>v("div",{class:"cpp__color-value"},null,-1)),Ct={class:"cps__track"},Mt={class:"cps__track"},Bt={class:"cp__box"},At=["value"],Ht=["onClick"],Gt={name:"ColorPicker",inheritAttrs:!1},Lt=Object.assign(Gt,{props:{value:{type:String,default:"#ffffffff"},modes:{type:Array,default:()=>["\u7EAF\u8272","\u6E10\u53D8"]},defaultColor:{type:String,default:"#ffffffff"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value","native-pick","blur"],setup(e,{emit:o}){const t=e,l=m(ve(t.value)),s=m(90),n=m([]),r=_e({h:0,s:0,l:0,a:0}),d=m("#f00"),p=m("#000"),g=m(0);let c=m({});const f="EyeDropper"in window,_=m(),k=m(),b=m(),w=m(),H=m(),M=m(),S=m();let G=null,L=null,B=null,E=null,O=null,W=!0,q=null;const N=m([]),I={color:t.defaultColor,gradient:t.defaultGradient,image:t.defaultImage},oe=Z(()=>t.modes.includes("\u6E10\u53D8")),ke=Z(()=>{const a=ee(p.value).join(",");return{background:`linear-gradient(to right, rgba(${a}, 0) 0%, rgb(${a}) 100%)`}});j(c,a=>{X(a.color)}),j(p,a=>{Ge(a)}),j(()=>t.value,a=>{const u=ve(a);u!==l.value&&(l.value=u),le(u),K(a),we(a)});const we=mt(300,async a=>{const u=N.value,i=u.indexOf(a);i!==-1&&N.value.splice(i,1),u.length>=4&&N.value.splice(u.length-1,1);const h=[a];N.value=h.concat(u)}),Se=j(r,Ce,{deep:!0});function Ce(a){const u=Ye(...Object.values(a));let i;l.value==="\u7EAF\u8272"?i=u:l.value==="\u6E10\u53D8"&&(c.value.color=u,i=pe(s.value,n.value)),ae(u),U(i)}he(Me);async function Me(){b.value.style.left=`${r.s}%`,b.value.style.top=`${100-r.l}%`,w.value.style.left=`${r.h/360*100}%`,M.value.style.left=`${r.a*100}%`,oe.value&&(G=V(_.value,{onmousedown:a,onmousemove:u,onmouseup:i}));function a(y){if(O)return;const A=n.value.findIndex(P=>P.offset>=y.x),T=n.value[A-1],R=te(T.color),re=n.value[A],ue=te(re.color),ce=[];for(let P=0;P<3;P+=1)ce.push(R[P]+(ue[P]-R[P])*y.x);const Te=re.offset-y.x-(y.x-T.offset)>0?R[3]:ue[3],Pe=fe(...ce,Te);c.value={color:Pe,offset:y.x},n.value.splice(A,0,c.value)}function u(y){if(!O)return;c.value.offset=y.x,n.value.sort((T,R)=>T.offset-R.offset);const A=pe(s.value,n.value);U(A)}function i(){O=!1}L=V(k.value,{onmousemove:h,onmouseup:h});function h(y){Y();const A=y.x*100,T=y.y*100;r.s=Math.round(A),r.l=Math.round(100-T),b.value.style.left=`${A}%`,b.value.style.top=`${T}%`}B=V(H.value,{onmousemove:C,onmouseup:C});function C(y){Y(),r.h=y.x*360,w.value.style.left=`${y.x*100}%`}E=V(S.value,{onmousemove:se,onmouseup:se});function se(y){Y(),r.a=y.x,M.value.style.left=`${y.x*100}%`}le(l.value),K(t.value)}Re(()=>{L==null||L.destroy(),B==null||B.destroy(),E==null||E.destroy(),Se(),G&&G.destroy()});function K(a){l.value==="\u7EAF\u8272"?I.color=a:l.value==="\u6E10\u53D8"?I.gradient=a:l.value==="\u56FE\u6848"&&(I.image=a)}function U(a){a!==t.value&&(K(a),o("update:value",a))}async function Be(a){if(a===l.value)return;l.value=a;let u;a==="\u7EAF\u8272"?u=I.color:a==="\u6E10\u53D8"?u=I.gradient:a==="\u56FE\u6848"&&(u=I.image),U(u)}function le(a){a==="\u7EAF\u8272"?X(t.value):a==="\u6E10\u53D8"&&(n.value.length===0?t.value.match(/[^,]+/g).forEach((u,i)=>{if(i===0){s.value=Number(u.match(/\d+/)[0]);return}let[h,C]=u.trim().split(" ");h.startsWith("#")||(h=fe(h)),C=C.match(/\d+/)[0]/100,n.value.push({color:h,offset:C}),c.value=n.value[0]}):X(c.value.color))}function ae(a){var u;d.value=`hsl(${r.h}, 100%, 50%)`,p.value=a.slice(0,7),p.value,g.value=Math.round(((u=r.a)!=null?u:1)*100)}function X(a){if(W){const u=Je(a);r.h=u[0],r.s=u[1],r.l=u[2],r.a=u[3],ae(a);let i=r.s;const h=Math.round(100-r.l);b.value.style.left=`${i}%`,b.value.style.top=`${h}%`,i=r.h/360,w.value.style.left=`${i*100}%`,M.value.style.left=`${r.a*100}%`}}function Ae(a){O=!0,c.value=a}function He(a){if(!["Backspace","Delete"].includes(a.key)||n.value.length===2)return;const u=n.value.indexOf(c.value);n.value.splice(u,1),c.value=n.value[0]}function Ge(a){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(a)){const u=ee(a),[i,h,C]=be(...u);r.h=i,r.s=h,r.l=C,b.value.style.left=`${r.s}%`,b.value.style.top=`${100-r.l}%`,w.value.style.left=`${r.h/360*100}%`,p.value=a}}function Y(){W=!1,q&&clearTimeout(q),q=setTimeout(()=>{W=!0},16)}async function J(a){let u="";if(a&&a.target.value){const i=a.target.value;u=i+(i.length===7?"ff":"")}else{const i=new window.EyeDropper;Qe("\u6309Esc\u53EF\u9000\u51FA");try{u=(await i.open()).sRGBHex+"ff"}catch{console.log("\u7528\u6237\u53D6\u6D88\u4E86\u53D6\u8272")}}o("update:value",u),o("native-pick",u)}const Le=a=>{o("blur",Ee(a.target.value))};function Ee(a){let u=a.replace(/\s/g,"");return a.startsWith("#")||(u="#"+u),u.length<9&&(u=u.padEnd(9,"f")),u}return(a,u)=>(x(),$("div",yt,[v("div",xt,ye(l.value),1),e.modes.length>1?(x(),Q(rt,{key:0,value:l.value,"onUpdate:value":Be},{default:je(()=>[(x(!0),$(z,null,F(e.modes,i=>(x(),Q(ht,{key:i,label:i},null,8,["label"]))),128))]),_:1},8,["value"])):ie("",!0),oe.value?Oe((x(),$("div",bt,[v("div",$t,[v("div",{ref_key:"elGradientTrack",ref:_,class:"cpgb__track h-full",style:D([{width:"100%"},{background:e.value}])},[(x(!0),$(z,null,F(n.value,(i,h)=>(x(),$("div",{key:h,class:me(["cpgb__pointer",{"cpgb__pointer--active":i===ze(c)}]),"data-sort":h,style:D({left:`${i.offset*100}%`,background:i.color}),tabindex:"-1",onMousedown:C=>Ae(i),onKeyup:Fe(He,["stop"])},null,46,kt))),128))],4)])],512)),[[Ve,l.value==="\u6E10\u53D8"]]):ie("",!0),v("div",{ref_key:"elPalette",ref:k,class:"cp__palette",style:D({background:d.value})},[wt,St,v("div",{ref_key:"elPalettePointer",ref:b,class:"cpp__pointer"},null,512)],4),v("div",{ref_key:"elSliderHux",ref:H,class:"cp__slider cp__slider-hux"},[v("div",Ct,[v("div",{ref_key:"elSliderHuxPointer",ref:w,class:"cpst__pointer"},null,512)])],512),v("div",{ref_key:"elSliderAlpha",ref:S,class:"cp__slider cp__slider-alpha"},[v("div",{class:"cpsa__background",style:D(ke.value)},null,4),v("div",Mt,[v("div",{ref_key:"elSliderAlphaPointer",ref:M,class:"cpst__pointer"},null,512)])],512),v("div",Bt,[v("div",{class:"item",onClick:J},[f?(x(),Q(pt,{key:0})):(x(),$("input",{key:1,class:"native",type:"color",onInput:J},null,32))]),v("input",{value:e.value,class:"input",onBlur:Le},null,40,At),(x(!0),$(z,null,F(N.value,i=>(x(),$("div",{key:i,class:"item",style:D({background:i}),onClick:h=>J({target:{value:i}})},null,12,Ht))),128))])]))}});var Tt=ne(Lt,[["__scopeId","data-v-2540b8c8"]]);export{Tt as C};
