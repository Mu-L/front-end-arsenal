import{p as e,k as t,w as l,g as n,h as a,C as o,n as u,o as s,m as i,s as r,F as c,z as d,x as v,t as f,E as p,G as m,H as g,e as h,j as y,I as b,J as x,b as _,K as w,A as k,q as M,L as $,y as C}from"./vendor.076ca5cd.js";const E=(e,{decimal:t=0}={})=>t>0?Number(e.toFixed(t)):Math.round(e),j=(e,{onmousedown:t,onmousemove:l,onmouseup:n}={})=>{let a=e.getBoundingClientRect();const o={x:0,y:0},u=e=>{let t=e.pageX-a.x,l=e.pageY-a.y;t<0&&(t=0),t>a.width&&(t=a.width),l<0&&(l=0),l>a.height&&(l=a.height),o.x=E(t/a.width,{decimal:2}),o.y=E(l/a.height,{decimal:2})},s=e=>{u(e),l&&l(o,e)},i=e=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",i),n&&n(o,e)},r=l=>{a=e.getBoundingClientRect(),u(l),document.addEventListener("mousemove",s),document.addEventListener("mouseup",i),t&&t(o,l)};return e.addEventListener("mousedown",r),{destroy(){e.removeEventListener("mousedown",r)}}},N=(e,t,l)=>{let n=Math.round(e).toString(16),a=Math.round(t).toString(16),o=Math.round(l).toString(16);return 1===n.length&&(n="0"+n),1===a.length&&(a="0"+a),1===o.length&&(o="0"+o),"#"+n+a+o},S=(e,t,l,n=1)=>{const a=N(e,t,l);let o=Math.round(255*n).toString(16);return 1===o.length&&(o="0"+o),a+o},L=(e,t,l)=>{e/=255,t/=255,l/=255;const n=Math.min(e,t,l),a=Math.max(e,t,l),o=a-n;let u=0,s=0;if(0===o)u=s=0;else{s=o/a;const n=((a-e)/6+o/2)/o,i=((a-t)/6+o/2)/o,r=((a-l)/6+o/2)/o;e===a?u=r-i:t===a?u=1/3+n-r:l===a&&(u=2/3+i-n),u<0?u+=1:u>1&&(u-=1)}return[360*u,100*s,100*a]};const T=(e,t,l)=>{const[n,a,o]=function(e,t,l){e=e/360*6,t/=100,l/=100;const n=Math.floor(e),a=e-n,o=l*(1-t),u=l*(1-a*t),s=l*(1-(1-a)*t),i=n%6,r=[l,u,o,o,s,l][i],c=[s,l,l,u,o,o][i],d=[o,o,s,l,l,u][i];return[Math.round(255*r),Math.round(255*c),Math.round(255*d)]}(e,t,l);return N(n,a,o)},I=e=>{let t=0,l=0,n=0;return 4==(e=e.slice(0,7)).length?(t=Number("0x"+e[1]+e[1]),l=Number("0x"+e[2]+e[2]),n=Number("0x"+e[3]+e[3])):7==e.length&&(t=Number("0x"+e[1]+e[2]),l=Number("0x"+e[3]+e[4]),n=Number("0x"+e[5]+e[6])),[t,l,n]},A=e=>{const t=I(e),l=Number("0x"+e[7]+e[8]);return[...t,Number((l/255).toFixed(2))]},O=e=>{const[t,l,n,a]=A(e);return((e,t,l,n=1)=>[...L(e,t,l),n])(t,l,n,a)},z=e=>e.startsWith("#")?"纯色":e.startsWith("linear-gradient")?"渐变":"图案",B=(e,t)=>{const l=[];return t.forEach((e=>{l.push(`${e.color} ${100*e.offset}%`)})),`linear-gradient(${e}deg, ${l.join(",")})`};function D(e){const t=function(e,t=!0){const l=document.createElement("div");return l.id="color-pipette-tooltip-container",l.innerHTML=e,l.style=`\n    position: fixed;\n    left: 50%;\n    top: 9%;\n    z-index: 10002;\n    display: ${t?"flex":"none"};\n    align-items: center;\n    background-color: rgba(0,0,0,0.4);\n    padding: 6px 12px;\n    border-radius: 4px;\n    color: #fff;\n    font-size: 18px;\n    pointer-events: none;\n  `,l}(e);document.body.appendChild(t),setTimeout((()=>{var e;return null==(e=null==t?void 0:t.parentNode)?void 0:e.removeChild(t)}),2e3)}e("data-v-4ec49efa");const G={class:"my-tabs"},q={class:"my-tabs__header p-0.5 mb-3 rounded bg-gray-100 cursor-pointers"},F={class:"my-tabs__header-shell relative flex justify-between"},H=["onClick"],K={class:"my-tabs__content"};t();const R={name:"Tabs"};const W=Object.assign(R,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup:function(e,{expose:t,emit:h}){const y=e;l((()=>y.value),(()=>{k()}));const b=n([]),x=a({width:0,left:0});let _=0;o((()=>{_=100/b.value.length,x.width=`${_}%`,k()}));let w=null;async function k(e=-1){var t,l,n,a;e<0&&(e=b.value.findIndex((e=>e.props.label===y.value))),x.left=_*e+"%";try{await u(),null==(l=null==(t=null==w?void 0:w.exposed)?void 0:t.changeActive)||l.call(t,!1),w=b.value[e],null==(a=null==(n=w.exposed)?void 0:n.changeActive)||a.call(n,!0)}catch(o){}}return t({tabs:b}),(t,l)=>(s(),i("div",G,[r("div",q,[r("div",F,[(s(!0),i(c,null,d(b.value,((t,l)=>(s(),i("div",{key:t.props.label,class:v(["my-tab__title relative flex-auto py-1 text-center",{"my-active":t.props.label===e.value}]),onClick:e=>function(e,t){h("update:value",e.props.label),k(t)}(t,l)},f(t.props.label),11,H)))),128)),r("div",{class:"my-tab__slider",style:p(m(x))},null,4)])]),r("div",K,[g(t.$slots,"default",{},void 0,!0)])]))}});W.__scopeId="data-v-4ec49efa";var P=h({setup(){}});const J={t:"1685345224620",class:"sd-xggj",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8489",width:"20",height:"20"},U=[r("path",{d:"M716.288 140.501333a42.666667 42.666667 0 0 1 60.373333 0l90.496 90.496a42.666667 42.666667 0 0 1 0 60.330667l-120.661333 120.704L595.626667 261.12l120.661333-120.661333zM520.192 185.770667l301.696 301.653333-60.330667 60.373333-301.653333-301.696 60.288-60.330666z","p-id":"8490"},null,-1),r("path",{d:"M580.565333 366.762667l-60.373333-60.330667-362.026667 362.026667V853.333333l181.034667-3.84 362.026667-362.026666-60.330667-60.373334-331.861333 331.904-60.373334-60.373333 331.904-331.861333z","p-id":"8491"},null,-1)];P.render=function(e,t,l,n,a,o){return s(),i("svg",J,U)};const V={name:"TabPanel"};const X=Object.assign(V,{props:{label:{type:String,required:!0}},setup:function(e,{expose:t}){const l=b();l.parent.exposed.tabs.value.push(l);const a=n(!1),o=y((()=>({display:a.value?"block":"none"})));return t({changeActive:function(e){a.value=e}}),(e,t)=>(s(),i("div",{class:"tab-panel",style:p(m(o))},[g(e.$slots,"default")],4))}});function Y(e,t,l){var n=(l||{}).atBegin;return function(e,t,l){var n,a=l||{},o=a.noTrailing,u=void 0!==o&&o,s=a.noLeading,i=void 0!==s&&s,r=a.debounceMode,c=void 0===r?void 0:r,d=!1,v=0;function f(){n&&clearTimeout(n)}function p(){for(var l=arguments.length,a=new Array(l),o=0;o<l;o++)a[o]=arguments[o];var s=this,r=Date.now()-v;function p(){v=Date.now(),t.apply(s,a)}function m(){n=void 0}d||(i||!c||n||p(),f(),void 0===c&&r>e?i?(v=Date.now(),u||(n=setTimeout(c?m:p,e))):p():!0!==u&&(n=setTimeout(c?m:p,void 0===c?e-r:e)))}return p.cancel=function(e){var t=(e||{}).upcomingOnly,l=void 0!==t&&t;f(),d=!l},p}(e,t,{debounceMode:!1!==(void 0!==n&&n)})}e("data-v-6b6d2061");const Q={class:"color-picker"},Z={class:"title"},ee={key:1,class:"cp__gradient flex-center"},te={class:"cp__gradient-bar w-48",style:{height:"16px"}},le=["data-sort","onMousedown","onKeyup"],ne=r("div",{class:"cpp__color-saturation"},null,-1),ae=r("div",{class:"cpp__color-value"},null,-1),oe={class:"cps__track"},ue={class:"cps__track"},se={class:"cp__box"},ie=["value"],re=["onClick"];t();const ce={name:"ColorPicker",inheritAttrs:!1};const de=Object.assign(ce,{props:{value:{type:String,default:"#ffffffff"},modes:{type:Array,default:()=>["纯色","渐变"]},defaultColor:{type:String,default:"#ffffffff"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value","native-pick"],setup:function(e,{emit:t}){const u=e,g=n(z(u.value)),h=n(90),b=n([]),E=a({h:0,s:0,l:0,a:0}),N=n("#f00"),G=n("#000"),q=n(0);let F=n({});const H="EyeDropper"in window,K=n(),R=n(),J=n(),U=n(),V=n(),ce=n(),de=n();let ve=null,fe=null,pe=null,me=null,ge=null,he=!0,ye=null;const be=n([]),xe={color:u.defaultColor,gradient:u.defaultGradient,image:u.defaultImage},_e=y((()=>u.modes.includes("渐变"))),we=y((()=>{const e=I(G.value).join(",");return{background:`linear-gradient(to right, rgba(${e}, 0) 0%, rgb(${e}) 100%)`}}));l(F,(e=>{Se(e.color)})),l(G,(e=>{!function(e){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(e)){const t=I(e),[l,n,a]=L(...t);E.h=l,E.s=n,E.l=a,J.value.style.left=`${E.s}%`,J.value.style.top=100-E.l+"%",U.value.style.left=E.h/360*100+"%",G.value=e}}(e)})),l((()=>u.value),(e=>{const t=z(e);t!==g.value&&(g.value=t),je(t),$e(e),ke(e)}));const ke=Y(300,(async e=>{const t=be.value,l=t.indexOf(e);-1!==l&&be.value.splice(l,1),t.length>=4&&be.value.splice(t.length-1,1);const n=[e];be.value=n.concat(t)})),Me=l(E,(function(e){const t=((e,t,l,n=1)=>`${T(e,t,l)}${0===n?"00":Math.round(255*n).toString(16)}`)(...Object.values(e));let l;"纯色"===g.value?l=t:"渐变"===g.value&&(F.value.color=t,l=B(h.value,b.value));Ne(t),Ce(l)}),{deep:!0});function $e(e){"纯色"===g.value?xe.color=e:"渐变"===g.value?xe.gradient=e:"图案"===g.value&&(xe.image=e)}function Ce(e){e!==u.value&&($e(e),t("update:value",e))}async function Ee(e){if(e===g.value)return;let t;g.value=e,"纯色"===e?t=xe.color:"渐变"===e?t=xe.gradient:"图案"===e&&(t=xe.image),Ce(t)}function je(e){"纯色"===e?Se(u.value):"渐变"===e&&(0===b.value.length?u.value.match(/[^,]+/g).forEach(((e,t)=>{if(0===t)return void(h.value=Number(e.match(/\d+/)[0]));let[l,n]=e.trim().split(" ");l.startsWith("#")||(l=S(l)),n=n.match(/\d+/)[0]/100,b.value.push({color:l,offset:n}),F.value=b.value[0]})):Se(F.value.color))}function Ne(e){var t;N.value=`hsl(${E.h}, 100%, 50%)`,G.value=e.slice(0,7),q.value=Math.round(100*(null!=(t=E.a)?t:1))}function Se(e){if(he){const t=O(e);E.h=t[0],E.s=t[1],E.l=t[2],E.a=t[3],Ne(e);let l=E.s;const n=Math.round(100-E.l);J.value.style.left=`${l}%`,J.value.style.top=`${n}%`,l=E.h/360,U.value.style.left=100*l+"%",ce.value.style.left=100*E.a+"%"}}function Le(e){if(!["Backspace","Delete"].includes(e.key))return;if(2===b.value.length)return;const t=b.value.indexOf(F.value);b.value.splice(t,1),F.value=b.value[0]}function Te(){he=!1,ye&&clearTimeout(ye),ye=setTimeout((()=>{he=!0}),16)}async function Ie(e){let l="";if(e&&e.target.value){const t=e.target.value;l=t+(7===t.length?"ff":"")}else{const e=new window.EyeDropper;D("按Esc可退出");try{const t=await e.open();l=t.sRGBHex+"ff"}catch(n){console.log("用户取消了取色")}}t("update:value",l),t("native-pick",l)}return o((async function(){J.value.style.left=`${E.s}%`,J.value.style.top=100-E.l+"%",U.value.style.left=E.h/360*100+"%",ce.value.style.left=100*E.a+"%",_e.value&&(ve=j(K.value,{onmousedown:function(e){if(ge)return;const t=b.value.findIndex((t=>t.offset>=e.x)),l=b.value[t-1],n=A(l.color),a=b.value[t],o=A(a.color),u=[];for(let r=0;r<3;r+=1)u.push(n[r]+(o[r]-n[r])*e.x);const s=a.offset-e.x-(e.x-l.offset)>0?n[3]:o[3],i=S(...u,s);F.value={color:i,offset:e.x},b.value.splice(t,0,F.value)},onmousemove:function(e){if(!ge)return;F.value.offset=e.x,b.value.sort(((e,t)=>e.offset-t.offset));Ce(B(h.value,b.value))},onmouseup:function(){ge=!1}}));function e(e){Te();const t=100*e.x,l=100*e.y;E.s=Math.round(t),E.l=Math.round(100-l),J.value.style.left=`${t}%`,J.value.style.top=`${l}%`}function t(e){Te(),E.h=360*e.x,U.value.style.left=100*e.x+"%"}function l(e){Te(),E.a=e.x,ce.value.style.left=100*e.x+"%"}fe=j(R.value,{onmousemove:e,onmouseup:e}),pe=j(V.value,{onmousemove:t,onmouseup:t}),me=j(de.value,{onmousemove:l,onmouseup:l}),je(g.value),$e(u.value)})),x((()=>{null==fe||fe.destroy(),null==pe||pe.destroy(),null==me||me.destroy(),Me(),ve&&ve.destroy()})),(t,l)=>(s(),i("div",Q,[r("div",Z,f(g.value),1),e.modes.length>1?(s(),_(W,{key:0,value:g.value,"onUpdate:value":Ee},{default:w((()=>[(s(!0),i(c,null,d(e.modes,(e=>(s(),_(X,{key:e,label:e},null,8,["label"])))),128))])),_:1},8,["value"])):k("",!0),m(_e)?M((s(),i("div",ee,[r("div",te,[r("div",{ref:K,class:"cpgb__track h-full",style:p([{width:"100%"},{background:e.value}])},[(s(!0),i(c,null,d(b.value,((e,t)=>(s(),i("div",{key:t,class:v(["cpgb__pointer",{"cpgb__pointer--active":e===m(F)}]),"data-sort":t,style:p({left:100*e.offset+"%",background:e.color}),tabindex:"-1",onMousedown:t=>{return l=e,ge=!0,void(F.value=l);var l},onKeyup:C(Le,["stop"])},null,46,le)))),128))],4)])],512)),[[$,"渐变"===g.value]]):k("",!0),r("div",{ref:R,class:"cp__palette",style:p({background:N.value})},[ne,ae,r("div",{ref:J,class:"cpp__pointer"},null,512)],4),r("div",{ref:V,class:"cp__slider cp__slider-hux"},[r("div",oe,[r("div",{ref:U,class:"cpst__pointer"},null,512)])],512),r("div",{ref:de,class:"cp__slider cp__slider-alpha"},[r("div",{class:"cpsa__background",style:p(m(we))},null,4),r("div",ue,[r("div",{ref:ce,class:"cpst__pointer"},null,512)])],512),r("div",se,[r("div",{class:"item",onClick:Ie},[H?(s(),_(P,{key:0})):(s(),i("input",{key:1,class:"native",type:"color",onInput:Ie},null,32))]),r("input",{value:e.value,onInput:l[0]||(l[0]=e=>t.$emit("update:value",e.target.value)),class:"input"},null,40,ie),(s(!0),i(c,null,d(be.value,(e=>(s(),i("div",{key:e,class:"item",style:p({background:e}),onClick:t=>Ie({target:{value:e}})},null,12,re)))),128))])]))}});de.__scopeId="data-v-6b6d2061";var ve=de;export{ve as C};
